!function(d,e,u){"use strict";Foundation.libs.clearing={name:"clearing",version:"5.5.3",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><div class="clearing-touch-label"></div><img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" /><p class="clearing-caption"></p><a href="#" class="clearing-main-prev"><span></span></a><a href="#" class="clearing-main-next"><span></span></a></div><img class="clearing-preload-next" style="display: none" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" /><img class="clearing-preload-prev" style="display: none" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" />'},close_selectors:".clearing-close, div.clearing-blackout",open_selectors:"",skip_selector:"",touch_label:"",init:!1,locked:!1},init:function(t,i,e){var n=this;Foundation.inherit(this,"throttle image_loaded"),this.bindings(i,e),n.S(this.scope).is("["+this.attr_name()+"]")?this.assemble(n.S("li",this.scope)):n.S("["+this.attr_name()+"]",this.scope).each(function(){n.assemble(n.S("li",this))})},events:function(t){var r=this,l=r.S,i=d(".scroll-container");0<i.length&&(this.scope=i),l(this.scope).off(".clearing").on("click.fndtn.clearing","ul["+this.attr_name()+"] li "+this.settings.open_selectors,function(t,i,e){var i=i||l(this),e=e||i,n=i.next("li"),a=i.closest("["+r.attr_name()+"]").data(r.attr_name(!0)+"-init"),s=l(t.target);t.preventDefault(),a||(r.init(),i.closest("["+r.attr_name()+"]").data(r.attr_name(!0)+"-init")),e.hasClass("visible")&&i[0]===e[0]&&0<n.length&&r.is_open(i)&&(s=l("img",e=n)),r.open(s,i,e),r.update_paddles(e)}).on("click.fndtn.clearing",".clearing-main-next",function(t){r.nav(t,"next")}).on("click.fndtn.clearing",".clearing-main-prev",function(t){r.nav(t,"prev")}).on("click.fndtn.clearing",this.settings.close_selectors,function(t){Foundation.libs.clearing.close(t,this)}),d(u).on("keydown.fndtn.clearing",function(t){r.keydown(t)}),l(e).off(".clearing").on("resize.fndtn.clearing",function(){r.resize()}),this.swipe_events(t)},swipe_events:function(t){var n=this,a=n.S;a(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(t){var i={start_page_x:(t=t.touches?t:t.originalEvent).touches[0].pageX,start_page_y:t.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:void 0};a(this).data("swipe-transition",i),t.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(t){var i,e;1<(t=t.touches?t:t.originalEvent).touches.length||t.scale&&1!==t.scale||((i=void 0===(i=a(this).data("swipe-transition"))?{}:i).delta_x=t.touches[0].pageX-i.start_page_x,Foundation.rtl&&(i.delta_x=-i.delta_x),void 0===i.is_scrolling&&(i.is_scrolling=!!(i.is_scrolling||Math.abs(i.delta_x)<Math.abs(t.touches[0].pageY-i.start_page_y))),i.is_scrolling||i.active||(t.preventDefault(),e=i.delta_x<0?"next":"prev",i.active=!0,n.nav(t,e)))}).on("touchend.fndtn.clearing",".visible-img",function(t){a(this).data("swipe-transition",{}),t.stopPropagation()})},assemble:function(t){var i,e,t=t.parent();t.parent().hasClass("carousel")||(t.after('<div id="foundationClearingHolder"></div>'),e="",null!=(i=t.detach())[0]&&(e=i[0].outerHTML,i=this.S("#foundationClearingHolder"),e='<div class="carousel">'+e+"</div>",t='<div class="clearing-assembled"><div>'+t.data(this.attr_name(!0)+"-init").templates.viewing+e+"</div></div>",e=this.settings.touch_label,Modernizr.touch&&(t=d(t).find(".clearing-touch-label").html(e).end()),i.after(t).remove()))},open:function(t,e,n){var a=this,s=d(u.body),r=n.closest(".clearing-assembled"),l=a.S("div",r).first(),c=a.S(".visible-img",l),i=a.S("img",c).not(t),o=a.S(".clearing-touch-label",l),g=!1;function h(){setTimeout(function(){this.image_loaded(i,function(){1!==i.outerWidth()||g?function(t){var i=d(t);i.css("visibility","visible"),i.trigger("imageVisible"),s.css("overflow","hidden"),r.addClass("clearing-blackout"),l.addClass("clearing-container"),c.show(),this.fix_height(n).caption(a.S(".clearing-caption",c),a.S("img",n)).center_and_label(t,o).shift(e,n,function(){n.closest("li").siblings().removeClass("visible"),n.closest("li").addClass("visible")}),c.trigger("opened.fndtn.clearing")}.call(this,i):h.call(this)}.bind(this))}.bind(this),100)}d("body").on("touchmove",function(t){t.preventDefault()}),i.error(function(){g=!0}),this.locked()||(c.trigger("open.fndtn.clearing"),(t=this.load(t)).interchange?i.attr("data-interchange",t.interchange).foundation("interchange","reflow"):i.attr("src",t.src).attr("data-interchange",""),i.css("visibility","hidden"),h.call(this))},close:function(t,i){t.preventDefault();e=d(i);var e=/blackout/.test(e.selector)?e:e.closest(".clearing-blackout"),n=d(u.body);return i===t.target&&e&&(n.css("overflow",""),i=d("div",e).first(),(t=d(".visible-img",i)).trigger("close.fndtn.clearing"),this.settings.prev_index=0,d("ul["+this.attr_name()+"]",e).attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout"),i.removeClass("clearing-container"),t.hide(),t.trigger("closed.fndtn.clearing")),d("body").off("touchmove"),!1},is_open:function(t){return 0<t.parent().prop("style").length},keydown:function(t){var i=d(".clearing-blackout ul["+this.attr_name()+"]"),e=this.rtl?37:39,n=this.rtl?39:37;t.which===e&&this.go(i,"next"),t.which===n&&this.go(i,"prev"),27===t.which&&this.S("a.clearing-close").trigger("click.fndtn.clearing")},nav:function(t,i){var e=d("ul["+this.attr_name()+"]",".clearing-blackout");t.preventDefault(),this.go(e,i)},resize:function(){var t=d("img",".clearing-blackout .visible-img"),i=d(".clearing-touch-label",".clearing-blackout");t.length&&(this.center_and_label(t,i),t.trigger("resized.fndtn.clearing"))},fix_height:function(t){var t=t.parent().children(),e=this;return t.each(function(){var t=e.S(this),i=t.find("img");t.height()>i.outerHeight()&&t.addClass("fix-height")}).closest("ul").width(100*t.length+"%"),this},update_paddles:function(t){var i=(t=t.closest("li")).closest(".carousel").siblings(".visible-img");0<t.next().length?this.S(".clearing-main-next",i).removeClass("disabled"):this.S(".clearing-main-next",i).addClass("disabled"),0<t.prev().length?this.S(".clearing-main-prev",i).removeClass("disabled"):this.S(".clearing-main-prev",i).addClass("disabled")},center_and_label:function(t,i){return!this.rtl&&0<i.length?i.css({marginLeft:-i.outerWidth()/2,marginTop:-t.outerHeight()/2-i.outerHeight()-10}):i.css({marginRight:-i.outerWidth()/2,marginTop:-t.outerHeight()/2-i.outerHeight()-10,left:"auto",right:"50%"}),this},load:function(t){var i,e="A"===t[0].nodeName?(i=t.attr("href"),t.data("clearing-interchange")):(i=(e=t.closest("a")).attr("href"),e.data("clearing-interchange"));return this.preload(t),{src:i||t.attr("src"),interchange:i?e:t.data("clearing-interchange")}},preload:function(t){this.img(t.closest("li").next(),"next").img(t.closest("li").prev(),"prev")},img:function(t,i){var e,n;return t.length&&(i=d(".clearing-preload-"+i),(t=(n=this.S("a",t)).length?(e=n.attr("href"),n.data("clearing-interchange")):(e=(n=this.S("img",t)).attr("src"),n.data("clearing-interchange")))?i.attr("data-interchange",t):(i.attr("src",e),i.attr("data-interchange",""))),this},caption:function(t,i){i=i.attr("data-caption");return i?(t.get(0).innerHTML=i,t.show()):t.text("").hide(),this},go:function(t,i){var t=this.S(".visible",t),e=t[i]();(e=this.settings.skip_selector&&0!=e.find(this.settings.skip_selector).length?e[i]():e).length&&this.S("img",e).trigger("click.fndtn.clearing",[t,e]).trigger("change.fndtn.clearing")},shift:function(t,i,e){var n=i.parent(),a=this.settings.prev_index||i.index(),t=this.direction(n,t,i),s=this.rtl?"right":"left",r=parseInt(n.css("left"),10),l=i.outerWidth(),c={};i.index()===a||/skip/.test(t)?/skip/.test(t)&&(a=i.index()-this.settings.up_count,this.lock(),c[s]=0<a?-a*l:0,n.animate(c,300,this.unlock())):/left/.test(t)?(this.lock(),c[s]=r+l,n.animate(c,300,this.unlock())):/right/.test(t)&&(this.lock(),c[s]=r-l,n.animate(c,300,this.unlock())),e()},direction:function(t,i,e){var t=this.S("li",t),n=t.outerWidth()+t.outerWidth()/4,n=Math.floor(this.S(".clearing-container").outerWidth()/n)-1,t=t.index(e);return this.settings.up_count=n,e=this.adjacent(this.settings.prev_index,t)?n<t&&t>this.settings.prev_index?"right":n-1<t&&t<=this.settings.prev_index&&"left":"skip",this.settings.prev_index=t,e},adjacent:function(t,i){for(var e=i+1;i-1<=e;e--)if(e===t)return!0;return!1},lock:function(){this.settings.locked=!0},unlock:function(){this.settings.locked=!1},locked:function(){return this.settings.locked},off:function(){this.S(this.scope).off(".fndtn.clearing"),this.S(e).off(".fndtn.clearing")},reflow:function(){this.init()}}}(jQuery,window,window.document);