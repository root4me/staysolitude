!function(o,r,d){"use strict";Foundation.libs.topbar={name:"topbar",version:"5.5.3",settings:{index:0,start_offset:0,sticky_class:"sticky",custom_back_text:!0,back_text:"Back",mobile_show_parent_link:!0,is_hover:!0,scrolltop:!0,sticky_on:"all",dropdown_autoclose:!0},init:function(t,a,s){Foundation.inherit(this,"add_custom_rule register_media throttle");var e=this;e.register_media("topbar","foundation-mq-topbar"),this.bindings(a,s),e.S("["+this.attr_name()+"]",this.scope).each(function(){var t=o(this),a=t.data(e.attr_name(!0)+"-init"),s=(e.S("section, .top-bar-section",this),t.data("index",0),t.parent());s.hasClass("fixed")||e.is_sticky(t,s,a)?(e.settings.sticky_class=a.sticky_class,(e.settings.sticky_topbar=t).data("height",s.outerHeight()),t.data("stickyoffset",s.offset().top)):t.data("height",t.outerHeight()),a.assembled||e.assemble(t),a.is_hover?e.S(".has-dropdown",t).addClass("not-click"):e.S(".has-dropdown",t).removeClass("not-click"),e.add_custom_rule(".f-topbar-fixed { padding-top: "+t.data("height")+"px }"),s.hasClass("fixed")&&e.S("body").addClass("f-topbar-fixed")})},is_sticky:function(t,a,s){var a=a.hasClass(s.sticky_class),e=matchMedia(Foundation.media_queries.small).matches,i=matchMedia(Foundation.media_queries.medium).matches,n=matchMedia(Foundation.media_queries.large).matches;return!((!a||"all"!==s.sticky_on)&&(!(a&&this.small()&&-1!==s.sticky_on.indexOf("small")&&e)||i||n)&&(!(a&&this.medium()&&-1!==s.sticky_on.indexOf("medium")&&e&&i)||n)&&!(a&&this.large()&&-1!==s.sticky_on.indexOf("large")&&e&&i&&n))},toggle:function(t){var a=this,t=t?a.S(t).closest("["+this.attr_name()+"]"):a.S("["+this.attr_name()+"]"),s=t.data(this.attr_name(!0)+"-init"),e=a.S("section, .top-bar-section",t);a.breakpoint()&&(a.rtl?(e.css({right:"0%"}),o(">.name",e).css({right:"100%"})):(e.css({left:"0%"}),o(">.name",e).css({left:"100%"})),a.S("li.moved",e).removeClass("moved"),t.data("index",0),t.toggleClass("expanded").css("height","")),s.scrolltop?t.hasClass("expanded")?t.parent().hasClass("fixed")&&(s.scrolltop?(t.parent().removeClass("fixed"),t.addClass("fixed"),a.S("body").removeClass("f-topbar-fixed"),r.scrollTo(0,0)):t.parent().removeClass("expanded")):t.hasClass("fixed")&&(t.parent().addClass("fixed"),t.removeClass("fixed"),a.S("body").addClass("f-topbar-fixed")):(a.is_sticky(t,t.parent(),s)&&t.parent().addClass("fixed"),t.parent().hasClass("fixed")&&(t.hasClass("expanded")?(t.addClass("fixed"),t.parent().addClass("expanded"),a.S("body").addClass("f-topbar-fixed")):(t.removeClass("fixed"),t.parent().removeClass("expanded"),a.update_sticky_positioning())))},timer:null,events:function(t){var i=this,n=this.S;n(this.scope).off(".topbar").on("click.fndtn.topbar","["+this.attr_name()+"] .toggle-topbar",function(t){t.preventDefault(),i.toggle(this)}).on("click.fndtn.topbar contextmenu.fndtn.topbar",'.top-bar .top-bar-section li a[href^="#"],['+this.attr_name()+'] .top-bar-section li a[href^="#"]',function(t){var a=o(this).closest("li"),s=a.closest("["+i.attr_name()+"]").data(i.attr_name(!0)+"-init");s.dropdown_autoclose&&s.is_hover&&o(this).closest(".hover").removeClass("hover"),!i.breakpoint()||a.hasClass("back")||a.hasClass("has-dropdown")||i.toggle()}).on("click.fndtn.topbar","["+this.attr_name()+"] li.has-dropdown",function(t){var a=n(this),s=n(t.target),e=a.closest("["+i.attr_name()+"]").data(i.attr_name(!0)+"-init");s.data("revealId")?i.toggle():i.breakpoint()||e.is_hover&&!Modernizr.touch||(t.stopImmediatePropagation(),a.hasClass("hover")?(a.removeClass("hover").find("li").removeClass("hover"),a.parents("li.hover").removeClass("hover")):(a.addClass("hover"),o(a).siblings().removeClass("hover"),"A"===s[0].nodeName&&s.parent().hasClass("has-dropdown")&&t.preventDefault()))}).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown>a",function(t){var a,s,e;i.breakpoint()&&(t.preventDefault(),s=(a=(t=n(this)).closest("["+i.attr_name()+"]")).find("section, .top-bar-section"),t.next(".dropdown").outerHeight(),e=t.closest("li"),a.data("index",a.data("index")+1),e.addClass("moved"),i.rtl?(s.css({right:-100*a.data("index")+"%"}),s.find(">.name").css({right:100*a.data("index")+"%"})):(s.css({left:-100*a.data("index")+"%"}),s.find(">.name").css({left:100*a.data("index")+"%"})),a.css("height",t.siblings("ul").outerHeight(!0)+a.data("height")))}),n(r).off(".topbar").on("resize.fndtn.topbar",i.throttle(function(){i.resize.call(i)},50)).trigger("resize.fndtn.topbar").load(function(){n(this).trigger("resize.fndtn.topbar")}),n("body").off(".topbar").on("click.fndtn.topbar",function(t){0<n(t.target).closest("li").closest("li.hover").length||n("["+i.attr_name()+"] li.hover").removeClass("hover")}),n(this.scope).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown .back",function(t){t.preventDefault();var t=n(this),a=t.closest("["+i.attr_name()+"]"),s=a.find("section, .top-bar-section"),e=(a.data(i.attr_name(!0)+"-init"),t.closest("li.moved")),t=e.parent();a.data("index",a.data("index")-1),i.rtl?(s.css({right:-100*a.data("index")+"%"}),s.find(">.name").css({right:100*a.data("index")+"%"})):(s.css({left:-100*a.data("index")+"%"}),s.find(">.name").css({left:100*a.data("index")+"%"})),0===a.data("index")?a.css("height",""):a.css("height",t.outerHeight(!0)+a.data("height")),setTimeout(function(){e.removeClass("moved")},300)}),n(this.scope).find(".dropdown a").focus(function(){o(this).parents(".has-dropdown").addClass("hover")}).blur(function(){o(this).parents(".has-dropdown").removeClass("hover")})},resize:function(){var n=this;n.S("["+this.attr_name()+"]").each(function(){var t,a,s=n.S(this),e=s.data(n.attr_name(!0)+"-init"),i=s.parent("."+n.settings.sticky_class);n.breakpoint()||(a=s.hasClass("expanded"),s.css("height","").removeClass("expanded").find("li").removeClass("hover"),a&&n.toggle(s)),n.is_sticky(s,i,e)&&(i.hasClass("fixed")?(i.removeClass("fixed"),t=i.offset().top,n.S(d.body).hasClass("f-topbar-fixed")&&(t-=s.data("height")),s.data("stickyoffset",t),i.addClass("fixed")):(t=i.offset().top,s.data("stickyoffset",t)))})},breakpoint:function(){return!matchMedia(Foundation.media_queries.topbar).matches},small:function(){return matchMedia(Foundation.media_queries.small).matches},medium:function(){return matchMedia(Foundation.media_queries.medium).matches},large:function(){return matchMedia(Foundation.media_queries.large).matches},assemble:function(t){var e=this,i=t.data(this.attr_name(!0)+"-init"),a=e.S("section, .top-bar-section",t);a.detach(),e.S(".has-dropdown>a",a).each(function(){var t=e.S(this),a=t.siblings(".dropdown"),s=t.attr("href");a.find(".title.back").length||(s=1==i.mobile_show_parent_link&&s?o('<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li><li class="parent-link hide-for-medium-up"><a class="parent-link js-generated" href="'+s+'">'+t.html()+"</a></li>"):o('<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5>'),1==i.custom_back_text?o("h5>a",s).html(i.back_text):o("h5>a",s).html("&laquo; "+t.html()),a.prepend(s))}),a.appendTo(t),this.sticky(),this.assembled(t)},assembled:function(t){t.data(this.attr_name(!0),o.extend({},t.data(this.attr_name(!0)),{assembled:!0}))},height:function(t){var a=0,s=this;return o("> li",t).each(function(){a+=s.S(this).outerHeight(!0)}),a},sticky:function(){var t=this;this.S(r).on("scroll",function(){t.update_sticky_positioning()})},update_sticky_positioning:function(){var t,a="."+this.settings.sticky_class,s=this.S(r),e=this;e.settings.sticky_topbar&&e.is_sticky(this.settings.sticky_topbar,this.settings.sticky_topbar.parent(),this.settings)&&(t=this.settings.sticky_topbar.data("stickyoffset")+this.settings.start_offset,e.S(a).hasClass("expanded")||(s.scrollTop()>t?e.S(a).hasClass("fixed")||(e.S(a).addClass("fixed"),e.S("body").addClass("f-topbar-fixed")):s.scrollTop()<=t&&e.S(a).hasClass("fixed")&&(e.S(a).removeClass("fixed"),e.S("body").removeClass("f-topbar-fixed"))))},off:function(){this.S(this.scope).off(".fndtn.topbar"),this.S(r).off(".fndtn.topbar")},reflow:function(){}}}(jQuery,window,window.document);